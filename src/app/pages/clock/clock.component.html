<!-- src/app/pages/clock/clock.component.html -->
<div class="min-h-screen bg-gray-50 p-4 sm:p-6">

  <!-- Header -->
  <div class="flex items-center justify-between mb-8">
    <button (click)="goBack()" class="btn btn-icon">
      <lucide-angular [img]="ArrowLeftIcon" class="w-5 h-5"></lucide-angular>
    </button>
    <h1 class="text-2xl font-bold text-dark-900">Time Tracking</h1>
    <div class="w-9"></div>
  </div>

  <!-- Main Container -->
  <div class="max-w-2xl mx-auto space-y-6">

    <!-- Time Display -->
    <div class="bg-white rounded-xl border border-gray-200 p-8 text-center">
      <p class="text-6xl font-bold font-mono text-dark-900 mb-2">
        {{ currentTime() }}
      </p>
      <p class="text-lg text-dark-600">
        {{ statusMessage() }}
      </p>
    </div>

    <!-- Divider -->
    <div class="h-px bg-gray-200"></div>

    <!-- Timers Section -->
    <div class="space-y-6">

      <!-- Work Timer -->
      <div>
        <h2 class="text-sm font-semibold text-dark-900 mb-4 flex items-center gap-2">
          <lucide-angular [img]="ClockIcon" class="w-5 h-5"></lucide-angular>
          Travail
        </h2>

        <div class="bg-white rounded-xl border border-gray-200 p-6">
          <p class="text-5xl font-bold font-mono text-dark-900 text-center mb-6">
            {{ workDisplay() }}
          </p>

          <button
            (click)="toggleWork()"
            [class.bg-primary-500]="!isWorkActive()"
            [class.bg-error]="isWorkActive()"
            class="btn w-full justify-center"
            [class.text-dark-900]="!isWorkActive()"
            [class.text-white]="isWorkActive()"
          >
            <lucide-angular
              [img]="isWorkActive() ? PauseIcon : PlayIcon"
              class="w-4 h-4"
            ></lucide-angular>
            <span>{{ isWorkActive() ? 'Arrêter' : 'Commencer' }}</span>
          </button>
        </div>
      </div>

      <!-- Break Timer -->
      <div>
        <h2 class="text-sm font-semibold text-dark-900 mb-4 flex items-center gap-2">
          <lucide-angular [img]="CoffeeIcon" class="w-5 h-5"></lucide-angular>
          Pause
        </h2>

        <div class="bg-white rounded-xl border border-gray-200 p-6">
          <p class="text-5xl font-bold font-mono text-dark-900 text-center mb-6">
            {{ breakDisplay() }}
          </p>

          <button
            (click)="toggleBreak()"
            [disabled]="!isWorkActive()"
            [class.opacity-50]="!isWorkActive()"
            [class.bg-primary-500]="!isBreakActive() && isWorkActive()"
            [class.bg-warning]="isBreakActive()"
            class="btn w-full justify-center"
            [class.text-dark-900]="!isBreakActive() && isWorkActive()"
            [class.text-white]="isBreakActive()"
          >
            <lucide-angular
              [img]="isBreakActive() ? PauseIcon : PlayIcon"
              class="w-4 h-4"
            ></lucide-angular>
            <span>{{ isBreakActive() ? 'Reprendre' : 'Pause' }}</span>
          </button>
        </div>
      </div>

    </div>

    <!-- Summary Stats -->
    <div class="bg-white rounded-xl border border-gray-200 p-6">
      <div class="grid grid-cols-3 gap-4">

        <!-- Total -->
        <div class="text-center">
          <p class="text-xs font-medium text-dark-600 mb-2">Total</p>
          <p class="text-2xl font-bold text-dark-900">{{ totalToday() }}</p>
        </div>

        <!-- Productivity -->
        <div class="text-center">
          <p class="text-xs font-medium text-dark-600 mb-2">Productivité</p>
          <p class="text-2xl font-bold text-primary-500">{{ productivityPercent() }}%</p>
        </div>

        <!-- Status -->
        <div class="text-center">
          <p class="text-xs font-medium text-dark-600 mb-2">Statut</p>
          <div class="inline-flex items-center gap-1 px-2 py-1 rounded bg-gray-50">
            <div
              class="w-2 h-2 rounded-full animate-pulse"
              [class.bg-success]="isWorkActive()"
              [class.bg-warning]="isBreakActive()"
              [class.bg-dark-300]="!isWorkActive() && !isBreakActive()"
            ></div>
            <span class="text-xs font-semibold text-dark-600">
              {{ isWorkActive() ? 'Travail' : isBreakActive() ? 'Pause' : 'Arrêt' }}
            </span>
          </div>
        </div>
      </div>
    </div>

    <!-- History -->
    <div class="bg-white rounded-xl border border-gray-200 p-6">
      <h3 class="text-sm font-semibold text-dark-900 mb-4 flex items-center gap-2">
        <lucide-angular [img]="ClockIcon" class="w-5 h-5"></lucide-angular>
        Historique aujourd'hui
      </h3>

      <div class="space-y-2">
        <div
          *ngFor="let session of getSessionHistory()"
          class="flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-gray-200 hover:border-primary-300 hover:bg-primary-50 transition-all"
        >
          <span class="text-sm font-medium text-dark-900">Session {{ session.index }}</span>
          <span class="text-sm text-dark-600 font-mono">{{ session.clockIn }} → {{ session.clockOut }}</span>
        </div>

        <div *ngIf="getSessionHistory().length === 0" class="text-center py-4">
          <p class="text-sm text-dark-500">Aucune session aujourd'hui</p>
        </div>
      </div>
    </div>

    <!-- Reset Button -->
    <button (click)="resetDay()" class="btn btn-secondary w-full justify-center">
      <lucide-angular [img]="RotateCcwIcon" class="w-4 h-4"></lucide-angular>
      <span>Réinitialiser</span>
    </button>

    <!-- Info -->
    <p class="text-xs text-dark-500 text-center">
      ⏱️ Les chronomètres continuent même en dehors de l'app
    </p>

  </div>

</div>